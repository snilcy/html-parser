{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/code/index.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,UAAU,EAAE,MAAM,cAAc,CAAC;AAC3D,OAAO,EAAE,IAAI,EAAE,MAAM,aAAa,CAAC;AAGnC,MAAM,IAAI;IACD,KAAK,GAAa,CAAC,EAAE,CAAC,CAAC;IAEtB,aAAa,GAAG,CAAC,IAAY,EAAE,EAAE;QACvC,UAAU,CACR,IAAI,CAAC,KAAK,EACV,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,EACrB,CAAC,IAAY,EAAE,EAAE,CAAC,IAAI,GAAG,IAAI,CAC9B,CAAC;IACJ,CAAC,CAAC;IAEF,IAAI,GAAG;QACL,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,MAAM,IAAI,CAAC,CAAC;IACvC,CAAC;IAED,IAAI,IAAI;QACN,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,CAAC;IAChC,CAAC;IAED,IAAI,GAAG;QACL,OAAO;YACL,GAAG,EAAE,IAAI,CAAC,GAAG;YACb,IAAI,EAAE,IAAI,CAAC,IAAI;SAChB,CAAC;IACJ,CAAC;IAED,OAAO,GAAG,CAAC,IAAY,EAAE,EAAE;QACzB,IAAI,IAAI,KAAK,IAAI,CAAC,QAAQ,EAAE;YAC1B,IAAI,CAAC,OAAO,EAAE,CAAC;SAChB;aAAM;YACL,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;SAC1B;IACH,CAAC,CAAC;IAEF,OAAO,GAAG,GAAG,EAAE;QACb,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACtB,CAAC,CAAC;CACH;AAED,OAAO,EAAE,IAAI,EAAE,CAAC","sourcesContent":["import { last, lastIndex, updateById } from \"@snilcy/cake\";\nimport { Char } from \"../const.js\";\nimport { ICodePosition } from \"./types.js\";\n\nclass Code {\n  public lines: string[] = [\"\"];\n\n  private addToLastLine = (char: string) => {\n    updateById(\n      this.lines,\n      lastIndex(this.lines),\n      (line: string) => line + char\n    );\n  };\n\n  get col() {\n    return last(this.lines)?.length || 1;\n  }\n\n  get line() {\n    return this.lines.length || 1;\n  }\n\n  get pos(): ICodePosition {\n    return {\n      col: this.col,\n      line: this.line,\n    };\n  }\n\n  addChar = (char: string) => {\n    if (char === Char.NEW_LINE) {\n      this.newLine();\n    } else {\n      this.addToLastLine(char);\n    }\n  };\n\n  newLine = () => {\n    this.lines.push(\"\");\n  };\n}\n\nexport { Code };\n"]}